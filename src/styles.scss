@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
  }

  .dark {
    color-scheme: dark;
  }

  html {
    font-family: 'Manrope', 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background-color: #f8fafc;
    color: #0f172a;
    @apply scroll-smooth;
  }

  body {
    min-height: 100vh;
    color: inherit;
    background-color: #f8fafc;
    background-image:
      radial-gradient(800px circle at 10% -10%, rgba(59, 130, 246, 0.12), transparent 45%),
      radial-gradient(700px circle at 85% -10%, rgba(56, 189, 248, 0.12), transparent 45%);
    background-attachment: fixed;
    overflow-x: hidden;
    @apply antialiased transition-colors duration-500 ease-out;
  }

  .dark body {
    color: #e2e8f0;
    background-color: #0b1220;
    background-image:
      radial-gradient(1100px circle at 15% -10%, rgba(56, 189, 248, 0.16), transparent 42%),
      radial-gradient(900px circle at 85% -15%, rgba(37, 99, 235, 0.24), transparent 40%),
      radial-gradient(rgba(148, 163, 184, 0.12) 1px, transparent 1px);
    background-size: 100% 100%, 100% 100%, 140px 140px;
  }

  h1,
  h2,
  h3 {
    font-family: 'Space Grotesk', 'Manrope', system-ui, sans-serif;
    letter-spacing: -0.02em;
    @apply font-semibold text-slate-900 dark:text-white;
  }

  p {
    @apply text-slate-600 dark:text-slate-300;
  }
}

@layer components {
  .app-shell {
    @apply relative z-10 flex min-h-screen flex-col;
  }

  .page-shell {
    @apply mx-auto flex w-full max-w-7xl flex-col gap-10 px-4 pb-20 pt-10 sm:px-6 lg:px-8 lg:gap-12;
  }

  .glass-card {
    @apply relative overflow-hidden rounded-2xl border border-slate-200/70 bg-white/90 p-6 shadow-glass backdrop-blur-xl transition-all duration-300 ease-out dark:border-slate-800/70 dark:bg-slate-900/70;
  }

  .glass-card:hover {
    @apply -translate-y-0.5 shadow-lg;
  }

  .accent-pill {
    @apply inline-flex items-center rounded-full border border-slate-200/70 bg-white/80 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-500 dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-300;
  }

  .primary-button {
    @apply inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-brand-600 to-brand-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-brand-600/20 transition-all duration-200 hover:-translate-y-0.5 hover:from-brand-500 hover:to-brand-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-300;
  }

  .ghost-button {
    @apply inline-flex items-center justify-center rounded-xl border border-slate-200/80 bg-white/80 px-5 py-2.5 text-sm font-semibold text-slate-600 transition-all duration-200 hover:-translate-y-0.5 hover:border-brand-200 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-200 dark:border-slate-800/70 dark:bg-slate-900/60 dark:text-slate-200 dark:hover:border-brand-500/40 dark:hover:text-white;
  }

  .quiet-button {
    @apply inline-flex items-center justify-center rounded-full border border-slate-200/70 bg-white/70 px-4 py-2 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-slate-500 transition-all duration-200 hover:border-brand-200 hover:text-brand-600 dark:border-slate-800/70 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:border-brand-500/40 dark:hover:text-white;
  }

  .input-field {
    @apply w-full rounded-xl border border-slate-200/70 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm outline-none transition focus:border-brand-300 focus:ring-2 focus:ring-brand-200 dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-100;
  }

  .select-field {
    @apply w-full min-w-0 rounded-xl border border-slate-200/70 bg-white/90 px-3 py-3 text-sm text-slate-800 shadow-sm outline-none transition focus:border-brand-300 focus:ring-2 focus:ring-brand-200 dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-100;
  }

  .filter-chip {
    @apply inline-flex items-center gap-2 rounded-full border border-slate-200/70 bg-white/80 px-3 py-1.5 text-xs font-semibold text-slate-500 transition hover:border-brand-200 hover:text-brand-600 dark:border-slate-800/70 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:border-brand-500/40 dark:hover:text-white;
  }

  .filter-chip-active {
    @apply border-brand-300 bg-brand-50/80 text-brand-700 dark:border-brand-400/60 dark:bg-slate-900/80 dark:text-white;
  }

  .badge-soft {
    @apply inline-flex items-center gap-2 rounded-full border border-slate-200/70 bg-white/80 px-3 py-1 text-xs font-semibold text-slate-600 transition-all duration-200 hover:border-slate-300 hover:shadow-sm dark:border-slate-700/70 dark:bg-slate-800/60 dark:text-slate-100 dark:hover:border-slate-600;
  }

  .quick-link {
    @apply flex items-center justify-between rounded-xl border border-slate-200/70 bg-white/80 px-4 py-3 text-sm font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-brand-200 hover:text-brand-700 dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-100 dark:hover:border-brand-500/40;
  }

  .list-card {
    @apply rounded-2xl border border-slate-200/70 bg-white/80 px-4 py-4 shadow-sm transition hover:-translate-y-0.5 hover:border-brand-200 dark:border-slate-800/70 dark:bg-slate-900/60 dark:hover:border-brand-500/40;
  }

  /* Transaction List Grouped Styles */
  .transaction-groups {
    @apply flex flex-col gap-6;
  }

  .transaction-group {
    @apply flex flex-col gap-3;
  }

  .group-header {
    @apply flex items-center justify-between px-1;
  }

  .group-title {
    @apply text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400;
  }

  .group-stats {
    @apply flex items-center gap-3 text-xs font-semibold;
  }

  .stat-income {
    @apply text-emerald-600 dark:text-emerald-400;
  }

  .stat-expense {
    @apply text-rose-600 dark:text-rose-400;
  }

  .transactions-list {
    @apply flex flex-col gap-2;
  }

  .transaction-item {
    @apply rounded-xl border border-slate-200/70 bg-white/90 transition-all duration-200
           hover:border-brand-300 hover:shadow-md
           dark:border-slate-800/70 dark:bg-slate-900/70 dark:hover:border-brand-500/50;
  }

  .transaction-content {
    @apply flex items-center justify-between gap-3 p-3 sm:p-4;
  }

  .transaction-main {
    @apply flex items-center gap-3 min-w-0 flex-1;
  }

  .transaction-icon {
    @apply flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-xl
           bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300;
  }

  .icon-fallback {
    @apply text-sm font-bold;
  }

  .transaction-info {
    @apply flex flex-col gap-0.5 min-w-0;
  }

  .transaction-title {
    @apply text-sm font-semibold text-slate-900 dark:text-white truncate;
  }

  .transaction-meta {
    @apply flex items-center gap-1.5 text-xs text-slate-500 dark:text-slate-400 flex-wrap;
  }

  .category-badge {
    @apply px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide
           bg-slate-100 dark:bg-slate-800 hidden sm:inline-block;
  }

  .separator {
    @apply text-slate-300 dark:text-slate-600 hidden sm:inline;
  }

  .transaction-end {
    @apply flex items-center gap-2 sm:gap-4 flex-shrink-0;
  }

  .transaction-amount {
    @apply text-sm sm:text-base font-bold whitespace-nowrap;
  }

  .transaction-actions {
    @apply flex items-center gap-1 opacity-0 transition-opacity duration-200;
  }

  .transaction-item:hover .transaction-actions {
    @apply opacity-100;
  }

  /* Show actions always on touch devices */
  @media (hover: none) {
    .transaction-actions {
      @apply opacity-100;
    }
  }

  .action-btn {
    @apply p-1.5 rounded-lg transition-colors duration-150;
  }

  .action-btn.edit {
    @apply text-slate-400 hover:text-brand-600 hover:bg-brand-50
           dark:hover:text-brand-400 dark:hover:bg-brand-500/10;
  }

  .action-btn.delete {
    @apply text-slate-400 hover:text-rose-600 hover:bg-rose-50
           dark:hover:text-rose-400 dark:hover:bg-rose-500/10;
  }

  /* Empty State */
  .empty-state {
    @apply flex flex-col items-center justify-center py-12 px-4 text-center
           rounded-2xl border border-dashed border-slate-200/70 bg-white/50
           dark:border-slate-800/70 dark:bg-slate-900/30;
  }

  .empty-state-icon {
    @apply w-16 h-16 rounded-2xl bg-slate-100 dark:bg-slate-800
           flex items-center justify-center text-slate-400 dark:text-slate-500 mb-4;
  }

  .empty-state-text {
    @apply text-base font-semibold text-slate-600 dark:text-slate-300;
  }

  .empty-state-hint {
    @apply text-sm text-slate-500 dark:text-slate-400 mt-1;
  }

  /* Pagination */
  .pagination {
    @apply flex items-center justify-center gap-2 mt-8;
  }

  .pagination-btn {
    @apply flex items-center justify-center gap-1.5 px-3 py-2 text-sm font-medium
           rounded-lg border border-slate-200/70 bg-white/80
           text-slate-600 transition-all duration-200
           hover:border-brand-300 hover:text-brand-600 hover:bg-brand-50
           disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-200/70 disabled:hover:bg-white/80 disabled:hover:text-slate-600
           dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-300
           dark:hover:border-brand-500/50 dark:hover:text-brand-400 dark:hover:bg-brand-500/10;
  }

  .pagination-btn.nav {
    @apply px-3 sm:px-4;
  }

  .pagination-btn.page {
    @apply w-10 h-10 px-0;
  }

  .pagination-btn.page.active {
    @apply bg-brand-600 border-brand-600 text-white
           dark:bg-brand-500 dark:border-brand-500;
  }

  .pagination-pages {
    @apply hidden sm:flex items-center gap-1;
  }

  .pagination-ellipsis {
    @apply px-2 text-slate-400 dark:text-slate-500;
  }

  .pagination-info {
    @apply text-center text-xs text-slate-500 dark:text-slate-400 mt-3;
  }

  /* Summary Stats Card */
  .summary-stats {
    @apply grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4;
  }

  .stat-card {
    @apply flex flex-col gap-1 p-4 rounded-xl
           border border-slate-200/70 bg-white/80
           dark:border-slate-800/70 dark:bg-slate-900/70;
  }

  .stat-card-label {
    @apply text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400;
  }

  .stat-card-value {
    @apply text-lg sm:text-xl font-bold text-slate-900 dark:text-white;
  }

  .stat-card-value.income {
    @apply text-emerald-600 dark:text-emerald-400;
  }

  .stat-card-value.expense {
    @apply text-rose-600 dark:text-rose-400;
  }

  .stat-card-value.balance {
    @apply text-brand-600 dark:text-brand-400;
  }

  /* Filters Compact (Mobile) */
  .filters-compact {
    @apply flex flex-col gap-3;
  }

  .filters-row {
    @apply flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 sm:mx-0 sm:px-0 sm:flex-wrap sm:overflow-visible;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .filters-row::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for horizontal scroll containers */
  .overflow-x-auto {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.slate.300') transparent;
  }

  .dark .overflow-x-auto {
    scrollbar-color: theme('colors.slate.700') transparent;
  }

  .overflow-x-auto::-webkit-scrollbar {
    height: 4px;
  }

  .overflow-x-auto::-webkit-scrollbar-track {
    background: transparent;
  }

  .overflow-x-auto::-webkit-scrollbar-thumb {
    background-color: theme('colors.slate.300');
    border-radius: 4px;
  }

  .dark .overflow-x-auto::-webkit-scrollbar-thumb {
    background-color: theme('colors.slate.700');
  }

  .filter-select {
    @apply flex-shrink-0 min-w-0 rounded-full border border-slate-200/70 bg-white/90
           px-3 py-2 text-xs font-medium text-slate-600
           focus:border-brand-300 focus:ring-2 focus:ring-brand-200 focus:outline-none
           dark:border-slate-800/70 dark:bg-slate-900/70 dark:text-slate-300;
  }

  /* Dialog/Modal */
  .dialog-backdrop {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4
           bg-slate-900/60 backdrop-blur-sm
           animate-fade-in;
  }

  .dialog-container {
    @apply relative w-full max-w-lg max-h-[90vh] overflow-y-auto
           rounded-2xl border border-slate-200/70 bg-white shadow-2xl
           dark:border-slate-800/70 dark:bg-slate-900
           animate-fade-up;
  }

  .dialog-header {
    @apply sticky top-0 z-10 flex items-start justify-between gap-4 p-6 pb-4
           border-b border-slate-100 bg-white/95 backdrop-blur-sm
           dark:border-slate-800 dark:bg-slate-900/95;
  }

  .dialog-title {
    @apply text-xl font-semibold text-slate-900 dark:text-white;
  }

  .dialog-subtitle {
    @apply mt-1 text-sm text-slate-600 dark:text-slate-300;
  }

  .dialog-close-btn {
    @apply flex-shrink-0 p-2 -m-2 rounded-lg text-slate-400
           transition-colors duration-150
           hover:text-slate-600 hover:bg-slate-100
           dark:hover:text-slate-200 dark:hover:bg-slate-800;
  }

  .dialog-content {
    @apply p-6;
  }

  /* FAB (Floating Action Button) */
  .fab {
    @apply fixed z-40 flex items-center justify-center
           w-14 h-14 rounded-full
           bg-gradient-to-r from-brand-600 to-brand-500
           text-white shadow-lg shadow-brand-600/30
           transition-all duration-200
           hover:-translate-y-1 hover:shadow-xl hover:shadow-brand-600/40
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-300 focus-visible:ring-offset-2
           active:scale-95;
    bottom: 1.5rem;
    right: 1.5rem;
  }

  @media (min-width: 640px) {
    .fab {
      bottom: 2rem;
      right: 2rem;
    }
  }

  .fab-icon {
    @apply w-6 h-6 transition-transform duration-200;
  }

  .fab:hover .fab-icon {
    @apply rotate-90;
  }
}

@layer utilities {
  .neon-toggle {
    @apply relative inline-flex h-9 w-16 cursor-pointer items-center rounded-full border border-slate-200/70 bg-white/80 p-1 transition-all duration-300 ease-out dark:border-slate-800/70 dark:bg-slate-900/60;
  }

  .neon-toggle::before {
    @apply absolute inset-0 rounded-full bg-gradient-to-r from-brand-200/30 to-neon-accent/20 opacity-0 transition-opacity duration-300 content-[''];
  }

  .dark .neon-toggle::before {
    @apply opacity-100 from-brand-500/30 to-neon-accent/20;
  }

  .neon-toggle-thumb {
    @apply relative flex h-full w-1/2 items-center justify-center rounded-full bg-white text-[0.6rem] font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition-all duration-300 ease-out dark:bg-neon-accent dark:text-slate-900;
  }

  .animate-fade-up {
    animation: fade-up 0.5s ease-out both;
  }

  .animate-fade-in {
    animation: fade-in 0.4s ease-out both;
  }

  .animate-grow {
    animation: grow 0.6s ease-out both;
    transform-origin: bottom;
  }

  @keyframes fade-up {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes grow {
    from {
      transform: scaleY(0.7);
      opacity: 0.6;
    }
    to {
      transform: scaleY(1);
      opacity: 1;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-fade-up,
    .animate-fade-in,
    .animate-grow {
      animation: none;
    }
  }
}
