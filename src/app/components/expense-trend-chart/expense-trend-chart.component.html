<article class="glass-card">
  <header class="flex flex-wrap items-start justify-between gap-4 mb-2">
    <div>
      <h2 class="text-xl font-semibold text-slate-900 dark:text-white">{{ title }}</h2>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">
        {{ description }}
      </p>
    </div>
    @if (!showIncome) {
      <div class="flex items-center gap-2 text-sm font-medium text-slate-500 dark:text-slate-300">
        <span class="h-2.5 w-2.5 rounded-full bg-rose-400"></span>
        Gastos
      </div>
    }
  </header>

  <!-- ApexCharts -->
  <div class="relative mt-4">
    @if (chartOptions.series && chartOptions.series.length > 0) {
      <apx-chart
        [series]="chartOptions.series!"
        [chart]="chartOptions.chart!"
        [xaxis]="chartOptions.xaxis!"
        [yaxis]="chartOptions.yaxis!"
        [stroke]="chartOptions.stroke!"
        [fill]="chartOptions.fill!"
        [dataLabels]="chartOptions.dataLabels!"
        [tooltip]="chartOptions.tooltip!"
        [grid]="chartOptions.grid!"
        [markers]="chartOptions.markers!"
        [legend]="chartOptions.legend!"
        [colors]="chartOptions.colors!"
        [theme]="chartOptions.theme!"
      ></apx-chart>
    } @else {
      <div class="flex items-center justify-center h-64 text-slate-400 dark:text-slate-500">
        <div class="text-center">
          <svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
          </svg>
          <p class="text-sm">No hay datos disponibles</p>
        </div>
      </div>
    }
  </div>

  <!-- Summary stats -->
  @if (maxValue > 0) {
    <div class="grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-slate-200 dark:border-slate-700">
      <div class="text-center">
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide">Maximo</div>
        <div class="mt-1 text-lg font-bold text-rose-600 dark:text-rose-400">
          {{ formatCurrency(maxValue) }}
        </div>
      </div>
      <div class="text-center border-x border-slate-200 dark:border-slate-700">
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide">Promedio</div>
        <div class="mt-1 text-lg font-bold text-slate-700 dark:text-slate-200">
          {{ formatCurrency(avgValue) }}
        </div>
      </div>
      <div class="text-center">
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide">Minimo</div>
        <div class="mt-1 text-lg font-bold text-emerald-600 dark:text-emerald-400">
          {{ formatCurrency(minValue) }}
        </div>
      </div>
    </div>
  }
</article>
