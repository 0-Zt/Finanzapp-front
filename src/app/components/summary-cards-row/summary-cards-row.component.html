<div class="grid w-full grid-cols-2 gap-3 sm:gap-4 lg:grid-cols-3 xl:grid-cols-5">
  @if (isLoading) {
    @for (i of skeletonItems; track i) {
      <app-skeleton-card></app-skeleton-card>
    }
  } @else {
    @for (card of cards; track card.title; let i = $index) {
      <article
        class="glass-card flex h-full flex-col gap-3 p-3 animate-fade-up cursor-default hover:scale-[1.02] hover:shadow-card-md sm:gap-4 sm:p-5"
        [ngClass]="accentClasses[card.accent]"
        [style.animation-delay.ms]="i * 80"
      >
        <div class="flex flex-col gap-2 sm:gap-3">
          @if (card.tag) {
            <div class="flex justify-end">
              <span class="badge-soft text-label-xs uppercase tracking-wide whitespace-nowrap">
                {{ card.tag }}
              </span>
            </div>
          }
          <div class="flex items-center gap-2 sm:gap-3">
            <span
              class="flex h-8 w-8 shrink-0 items-center justify-center rounded-xl text-label-xs uppercase sm:h-10 sm:w-10 sm:rounded-2xl"
              [ngClass]="iconClasses[card.accent]"
            >
              {{ card.title.slice(0, 2) }}
            </span>
            <div class="flex flex-col min-w-0">
              <span class="text-label-xs uppercase tracking-[0.08em] text-text-secondary dark:text-text-secondary-dark sm:text-label">
                {{ card.title }}
              </span>
              <span class="text-body-sm font-semibold leading-snug tracking-tight text-text-primary dark:text-text-primary-dark sm:text-heading tabular-nums">
                {{ card.value }}
              </span>
            </div>
          </div>
        </div>

        @if (card.delta) {
          <div class="flex items-baseline gap-1.5 text-caption font-semibold sm:gap-2 sm:text-body-sm" [ngClass]="trendClass(card.trend)">
            <span>{{ card.delta }}</span>
            <span class="font-medium text-text-secondary dark:text-text-secondary-dark hidden sm:inline">{{ card.deltaLabel }}</span>
          </div>
        }

        <p class="text-caption leading-relaxed text-text-secondary dark:text-text-secondary-dark line-clamp-2 sm:text-body-sm sm:line-clamp-none">{{ card.description }}</p>

        @if (card.items?.length) {
          <ul class="hidden flex-col gap-2 pt-3 text-caption sm:flex sm:pt-4 sm:text-body-sm">
            @for (item of card.items; track item.label) {
              <li class="flex items-center justify-between text-text-secondary dark:text-text-secondary-dark">
                <span>{{ item.label }}</span>
                <span class="font-semibold text-text-primary dark:text-text-primary-dark">{{ item.value }}</span>
              </li>
            }
          </ul>
        }
      </article>
    }
  }
</div>
