<article class="glass-card animate-fade-up h-full flex flex-col">
  <header class="flex flex-wrap items-start justify-between gap-4">
    <div>
      <h2 class="text-xl font-semibold text-slate-900 dark:text-white">{{ title }}</h2>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">
        {{ description }}
      </p>
    </div>
    <span class="filter-chip">Periodo actual</span>
  </header>

  @if (!items.length) {
    <div class="mt-6 flex-1 flex items-center justify-center">
      <div class="text-center text-slate-400 dark:text-slate-500">
        <svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
        </svg>
        <p class="text-sm">No hay gastos registrados en este periodo.</p>
      </div>
    </div>
  } @else {
    <div class="mt-4 flex flex-col items-center gap-4 flex-1">
      <!-- ApexCharts Donut -->
      <div class="w-full max-w-xs">
        @if (chartOptions.series && chartOptions.series.length > 0) {
          <apx-chart
            [series]="chartOptions.series!"
            [chart]="chartOptions.chart!"
            [labels]="chartOptions.labels!"
            [plotOptions]="chartOptions.plotOptions!"
            [dataLabels]="chartOptions.dataLabels!"
            [stroke]="chartOptions.stroke!"
            [fill]="chartOptions.fill!"
            [tooltip]="chartOptions.tooltip!"
            [legend]="chartOptions.legend!"
            [colors]="chartOptions.colors!"
            [responsive]="chartOptions.responsive!"
          ></apx-chart>
        }
      </div>

      <!-- Legend -->
      <ul class="flex flex-col gap-2 text-sm w-full">
        @for (item of items; track item.label) {
          <li class="flex items-center justify-between gap-3 rounded-xl border border-slate-200/60 bg-white/70 px-3 py-2 dark:border-slate-800/70 dark:bg-slate-900/60 transition-all duration-200 hover:border-slate-300 dark:hover:border-slate-700 hover:shadow-sm">
            <div class="flex items-center gap-2 min-w-0">
              <span
                class="h-3 w-3 rounded-full flex-shrink-0 shadow-sm"
                [style.backgroundColor]="item.color"
              ></span>
              <span class="text-slate-600 dark:text-slate-300 truncate">{{ item.label }}</span>
            </div>
            <span class="font-semibold text-slate-900 dark:text-white flex-shrink-0">
              {{ item.percent }}%
            </span>
          </li>
        }
      </ul>
    </div>
  }
</article>
